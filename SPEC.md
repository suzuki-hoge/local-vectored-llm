# Local RAG System Specification

## 1. システム概要
- Ollama（Deepseek）とChromaDBを使用したローカルRAGシステム
- ドキュメントの取り込みと質問応答の2つの主要機能
- シンプルなコマンドラインインターフェース

## 2. コマンド仕様

### rag-load
- 機能：ディレクトリ内のドキュメントを一括処理
- パラメータ：
  - `-i, --input`: 処理するディレクトリのパス（必須）
  - `-s, --chunk-size`: チャンクサイズ（オプション、デフォルト1000）
- 処理内容：
  - 指定ディレクトリ内の全ファイルを処理
  - テキスト抽出とチャンク分割
  - 埋め込み生成
  - ChromaDBへの保存

### rag-chat
- 機能：ドキュメントを参照した質問応答
- パラメータ：
  - `-s, --system-prompt`: システムプロンプト（オプション）
  - `-i, --interactive`: インタラクティブモード（オプション）
- 動作モード：
  - インタラクティブモード：対話形式で質問応答
  - 通常モード：単一の質問に対する応答

## 3. 技術仕様

### ドキュメント処理
- 対応フォーマット：
  - PDF
  - テキストファイル
  - Markdown
- チャンク分割：
  - デフォルトサイズ：1000トークン
  - 段落単位での分割
  - チャンク間の重複を考慮

### ベクトルストア
- ChromaDBを使用
- 単一のデフォルトコレクション
- メタデータ：
  - ソースファイル
  - チャンクインデックス
  - ファイルタイプ

### LLM連携
- Ollamaを使用
- デフォルトモデル：deepseek-coder
- システムプロンプトのカスタマイズ可能

## 4. 使用例

```bash
# ドキュメントの取り込み
rag-load -i ./documents
rag-load -i ./documents -s 2000

# チャット
rag-chat -i
rag-chat -s "あなたは技術ドキュメントの専門家です" -i
echo "このプロジェクトの主要な機能は何ですか？" | rag-chat
```

## 5. 制限事項
- 単一のChromaDBコレクションのみ使用
- ローカル環境でのみ動作
- Ollamaモデルのコンテキストウィンドウ制限に依存

## 6. 今後の拡張可能性
- 他のドキュメントフォーマットのサポート
- メタデータの拡張
- 検索パラメータのカスタマイズ
- 評価システムの実装 